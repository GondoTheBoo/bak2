#include "../../../common/opengl.h"	// -> all relevant opengl headers + glew
#include "../../../common/sfml.h"		// -> all relevant sfml headers
#include "../../../common/glm.h"		// -> all relevant glm ( maths ) headers

#include <iostream>
#include <string>

int main( int argc, char** argv )
{
	unsigned int windowWidth = 800;
	unsigned int windowHeight = 800;

////////////////////////////////////////////////////////////////////////////////////////
// WINDOW CREATION, ALSO CREATES OPENGL CONTEXT & INITIALIZES GLEW
////////////////////////////////////////////////////////////////////////////////////////
	sf::Window window( sf::VideoMode( windowWidth, windowHeight, 32 ), "tutorial", sf::Style::Close, sf::ContextSettings( 16, 0, 4, 3, 3 ) );
	if ( glewInit() != GLEW_OK ) return 0;

////////////////////////////////////////////////////////////////////////////////////////
// INIT: ALLOCATE OPENGL RESOURCES
////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////
// MAIN LOOP BEGINS
////////////////////////////////////////////////////////////////////////////////////////
	while ( true )
	{
		bool exit = false;
		sf::Event ev;

		////////////////////////////////////////////////////////////////////////////////////////
		// POLL WINDOW EVENTS -> HANDLE USER INPUT
		// check out the sf::Event class
		// at http://www.sfml-dev.org/documentation/2.1/classsf_1_1Event.php
		// for more event types, e.g. keyboard
		////////////////////////////////////////////////////////////////////////////////////////
		while ( window.pollEvent( ev ) )
		{
			if ( sf::Event::Closed == ev.type )
			{
				exit = true;
				break;
			}
			else if ( sf::Event::MouseMoved == ev.type )
			{
				//std::cout << "mouse moved, new position at ( " << ev.mouseMove.x << " | " << ev.mouseMove.y << " ) " << std::endl;
			}
			else if ( sf::Event::MouseButtonPressed == ev.type )
			{
				std::string button = "unknown";

				switch ( ev.mouseButton.button )
				{
					case sf::Mouse::Left:
						button = "left";
						break;
					case sf::Mouse::Right:
						button = "right";
						break;
					case sf::Mouse::Middle:
						button = "middle";
						break;
					default:
						break;
				}

				std::cout << button + " mouse button down at ( " << ev.mouseButton.x << " | " << ev.mouseButton.y << " ) " << std::endl;
			}
		}
		if ( exit ) break;

		////////////////////////////////////////////////////////////////////////////////////////
		// RENDER: MAKE OPENGL CALLS, START WORK @GPU
		////////////////////////////////////////////////////////////////////////////////////////

		////////////////////////////////////////////////////////////////////////////////////////
		// UPDATE: PERFORM CALCULATIONS @CPU FOR NEXT FRAME
		////////////////////////////////////////////////////////////////////////////////////////

		////////////////////////////////////////////////////////////////////////////////////////
		// DISPLAY: SYNC POINT WITH GPU, UPDATE WINDOW CONTENT
		////////////////////////////////////////////////////////////////////////////////////////
		window.display();
	}
////////////////////////////////////////////////////////////////////////////////////////
// MAIN LOOP ENDS
////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////
// UN-INIT: RELEASE ALL RESOURCES HERE
////////////////////////////////////////////////////////////////////////////////////////

	return 0;
}